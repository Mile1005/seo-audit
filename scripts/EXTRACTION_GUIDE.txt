# String Extraction & Translation Implementation Guide

## Overview

This guide explains how to extract all hardcoded strings from the AI SEO Turbo codebase and implement i18n translations using next-intl.

## Step 1: Run the Extraction Script

The extraction script scans your entire codebase and extracts all hardcoded strings into a structured JSON file.

### Run the script:

```bash
pnpm tsx scripts/extract-strings.ts
```

### What it does:
1. Scans `app/`, `components/`, and `lib/` directories
2. Extracts all user-facing strings (button text, labels, messages, etc.)
3. Filters out code-related strings (CSS classes, imports, etc.)
4. Organizes strings into namespaces based on file location
5. Generates `messages/en-extracted.json` with all found strings
6. Creates `scripts/extraction-report.txt` with detailed statistics

### Output files:
- `messages/en-extracted.json` - All extracted strings organized by namespace
- `scripts/extraction-report.txt` - Detailed extraction report

## Step 2: Review Extracted Strings

1. Open `messages/en-extracted.json`
2. Review the extracted strings
3. Remove false positives (code snippets, variable names, etc.)
4. Merge useful strings into `messages/en.json`

### Example extracted structure:

```json
{
  "dashboard": {
    "title": "Dashboard",
    "welcome": "Welcome back",
    "projects": "Projects"
  },
  "audit": {
    "start": "Start Audit",
    "running": "Running...",
    "complete": "Complete"
  }
}
```

## Step 3: Update Components to Use Translations

### Client Components

Replace hardcoded strings with translation hooks:

**Before:**
```tsx
'use client';

export function Button() {
  return <button>Start Audit</button>;
}
```

**After:**
```tsx
'use client';
import { useTranslations } from 'next-intl';

export function Button() {
  const t = useTranslations('audit');
  return <button>{t('start')}</button>;
}
```

### Server Components

**Before:**
```tsx
export default function Page() {
  return <h1>Dashboard</h1>;
}
```

**After:**
```tsx
import { getTranslations } from 'next-intl/server';

export default async function Page() {
  const t = await getTranslations('dashboard');
  return <h1>{t('title')}</h1>;
}
```

### Dynamic Content with Variables

**Before:**
```tsx
<p>Welcome back, {user.name}!</p>
```

**After:**
```tsx
const t = useTranslations('dashboard');
<p>{t('welcome', { name: user.name })}</p>

// In messages/en.json:
{
  "dashboard": {
    "welcome": "Welcome back, {name}!"
  }
}
```

### Pluralization

**Before:**
```tsx
<p>{count} audits completed</p>
```

**After:**
```tsx
const t = useTranslations('audit');
<p>{t('completed', { count })}</p>

// In messages/en.json:
{
  "audit": {
    "completed": "{count, plural, =0 {No audits} =1 {1 audit} other {# audits}} completed"
  }
}
```

## Step 4: Common Patterns

### Navigation Links

```tsx
// Before
<Link href="/dashboard">Dashboard</Link>

// After
import { Link } from '@/lib/navigation';
import { useTranslations } from 'next-intl';

const t = useTranslations('nav');
<Link href="/dashboard">{t('dashboard')}</Link>
```

### Form Labels

```tsx
// Before
<label htmlFor="email">Email Address</label>

// After
const t = useTranslations('auth.login');
<label htmlFor="email">{t('email')}</label>
```

### Error Messages

```tsx
// Before
<p className="error">Invalid email or password</p>

// After
const t = useTranslations('auth.errors');
<p className="error">{t('invalidCredentials')}</p>
```

### Button Text

```tsx
// Before
<Button>Save Changes</Button>

// After
const t = useTranslations('common');
<Button>{t('save')}</Button>
```

### Meta Tags (in metadata)

```tsx
// Before
export const metadata = {
  title: 'Dashboard - AI SEO Turbo',
  description: 'Monitor your SEO performance'
};

// After
import { getTranslations } from 'next-intl/server';

export async function generateMetadata() {
  const t = await getTranslations('dashboard');
  
  return {
    title: t('title'),
    description: t('subtitle')
  };
}
```

## Step 5: Handle Special Cases

### Framer Motion Animations

Framer Motion props don't need translation - keep them as is:

```tsx
<motion.div
  initial={{ opacity: 0 }}
  animate={{ opacity: 1 }}
  transition={{ duration: 0.5 }}
>
  {t('content')} {/* Only translate content */}
</motion.div>
```

### Radix UI Props

Keep Radix UI prop values as technical strings:

```tsx
<Select defaultValue="desktop"> {/* Technical value - don't translate */}
  <SelectItem value="desktop">
    {t('devices.desktop')} {/* Translate display text */}
  </SelectItem>
</Select>
```

### PDF/CSV Export Labels

```tsx
// Before
const pdfHeaders = ['Keyword', 'Volume', 'Difficulty'];

// After
const t = useTranslations('keywords.table');
const pdfHeaders = [
  t('keyword'),
  t('volume'),
  t('difficulty')
];
```

### Dynamic Content (Audit Results)

```tsx
// Before
const message = `Found ${count} critical issues`;

// After
const t = useTranslations('audit');
const message = t('criticalIssuesFound', { count });

// In messages/en.json:
{
  "audit": {
    "criticalIssuesFound": "Found {count} critical {count, plural, =1 {issue} other {issues}}"
  }
}
```

## Step 6: Translation Coverage Checklist

Go through each section systematically:

### Pages
- [ ] Homepage (`app/page.tsx`)
- [ ] Features (`app/features/`)
- [ ] Pricing (`app/pricing/`)
- [ ] Dashboard (`app/dashboard/`)
- [ ] Login/Signup (`app/login/`, `app/signup/`)
- [ ] Blog (`app/blog/`)

### Components
- [ ] Navigation (`components/navigation/`)
- [ ] Forms (`components/forms/`)
- [ ] Audit Results (`components/audit/`)
- [ ] Keyword Research (`components/keywords/`)
- [ ] Backlink Analysis (`components/backlinks/`)
- [ ] Dashboard Widgets (`components/dashboard/`)

### Content Types
- [ ] Button text
- [ ] Form labels
- [ ] Placeholders
- [ ] Error messages
- [ ] Success messages
- [ ] Table headers
- [ ] Chart labels
- [ ] Tooltips
- [ ] Modal content
- [ ] Meta descriptions
- [ ] Email templates

## Step 7: Automated Script Workflow

For bulk updates, create a simple script:

```typescript
// scripts/migrate-component.ts
import fs from 'fs';

function addTranslationImport(content: string): string {
  if (content.includes("'use client'")) {
    return content.replace(
      "'use client';",
      "'use client';\nimport { useTranslations } from 'next-intl';"
    );
  }
  return content;
}

function addTranslationHook(content: string, namespace: string): string {
  // Add hook at component start
  return content.replace(
    /export function (\w+)/,
    `export function $1() {\n  const t = useTranslations('${namespace}');\n`
  );
}

// Usage:
const file = 'components/example.tsx';
let content = fs.readFileSync(file, 'utf-8');
content = addTranslationImport(content);
content = addTranslationHook(content, 'example');
fs.writeFileSync(file, content);
```

## Step 8: Testing

After migrating components:

1. **Visual Check**: Browse all pages in different locales
2. **Console Check**: Look for missing translation warnings
3. **Type Check**: Run `pnpm type-check` to verify
4. **Build Check**: Run `pnpm build` to ensure no errors

## Step 9: Translation Workflow for Other Languages

After English is complete:

1. Copy `messages/en.json` to `messages/fr.json` (or any locale)
2. Translate all values (keep keys the same)
3. Use professional translation service or tools:
   - Google Translate API
   - DeepL API
   - Professional translators
   - Community contributions

## Tips & Best Practices

### DO ‚úÖ
- Extract ALL user-facing strings
- Use semantic keys (`dashboard.title` not `text1`)
- Group related strings in namespaces
- Use placeholders for dynamic content (`{name}`, `{count}`)
- Test with long translations (German is ~30% longer than English)
- Keep technical values (IDs, keys) untranslated

### DON'T ‚ùå
- Don't translate CSS classes
- Don't translate technical values (API endpoints, env vars)
- Don't translate import paths
- Don't translate Framer Motion animation values
- Don't hardcode strings in components after migration
- Don't forget pluralization for countable items

## Troubleshooting

### Missing translation warning:
```
MISSING_MESSAGE: No message was provided for the key "dashboard.title"
```
**Fix**: Add the key to your translation file or check for typos.

### Type error: Translation key doesn't exist:
```typescript
// Error: Key 'invalidKey' doesn't exist
t('invalidKey')
```
**Fix**: TypeScript autocomplete shows available keys. Use valid keys or add new ones to `messages/en.json`.

### Build error: Can't find locale:
```
Error: Locale 'fr' is not configured
```
**Fix**: Ensure locale is in `i18n.ts` locales array and translation file exists.

## Estimated Timeline

- **Extraction**: 30 minutes (automated)
- **Review & Cleanup**: 2-3 hours
- **Component Migration**: 
  - Small project: 4-6 hours
  - Medium project: 1-2 days
  - Large project (like yours): 3-4 days
- **Testing**: 1 day
- **Translation**: 2-3 days per language (with professional help)

## Next Steps

1. Run extraction script
2. Review `en-extracted.json`
3. Merge into `en.json`
4. Start migrating high-traffic pages first (homepage, dashboard)
5. Move to components
6. Add translations for other locales
7. Test thoroughly
8. Deploy with confidence! üöÄ
